# ğŸ”“ å°ç™½ä¸“ç”¨ï¼šCloudflare è§£ç»‘å’Œè®¾ç½®å®Œæ•´æŒ‡å—

## å½“å‰çŠ¶æ€
âœ… å·²ç§»é™¤ `wrangler.pages.toml` ä¸­çš„ç»‘å®šé…ç½®  
ç°åœ¨éœ€è¦æ¨é€åˆ° GitHub å¹¶åœ¨æ§åˆ¶å°æ‰‹åŠ¨è®¾ç½®

---

## ğŸ“‹ æ­¥éª¤ 1: æ¨é€æ›´æ”¹åˆ° GitHubï¼ˆè§£é”æ§åˆ¶å°ï¼‰

### 1.1 æ‰“å¼€ç»ˆç«¯/å‘½ä»¤æç¤ºç¬¦
- æŒ‰ `Win + R`ï¼Œè¾“å…¥ `cmd`ï¼Œå›è½¦
- æˆ–è€…åœ¨é¡¹ç›®æ–‡ä»¶å¤¹å³é”®é€‰æ‹©"åœ¨æ­¤å¤„æ‰“å¼€ PowerShell çª—å£"

### 1.2 æ¨é€å‘½ä»¤ï¼ˆå¤åˆ¶ç²˜è´´å³å¯ï¼‰
```bash
# æ·»åŠ æ‰€æœ‰æ›´æ”¹
git add .

# æäº¤æ›´æ”¹
git commit -m "ç§»é™¤ç»‘å®šé…ç½®ä»¥è§£é”æ§åˆ¶å°ç¼–è¾‘åŠŸèƒ½"

# æ¨é€åˆ° GitHub
git push origin master
```

### 1.3 ç­‰å¾…éƒ¨ç½²
- æ¨é€å®Œæˆåï¼ŒGitHub ä¼šè‡ªåŠ¨è§¦å‘ Cloudflare Pages é‡æ–°éƒ¨ç½²
- ç­‰å¾… 2-5 åˆ†é’Ÿè®©éƒ¨ç½²å®Œæˆ

---

## ğŸ›ï¸ æ­¥éª¤ 2: åœ¨ Cloudflare æ§åˆ¶å°è®¾ç½®ï¼ˆç°åœ¨åº”è¯¥å¯ä»¥ç¼–è¾‘äº†ï¼‰

### 2.1 ç™»å½• Cloudflare
1. æ‰“å¼€ https://dash.cloudflare.com
2. ç™»å½•ä½ çš„è´¦å·
3. æ‰¾åˆ°å¹¶ç‚¹å‡» `kemono-shares-api` é¡¹ç›®

### 2.2 è®¾ç½®æ„å»ºé…ç½®
1. ç‚¹å‡» `Settings` ï¼ˆè®¾ç½®ï¼‰
2. ç‚¹å‡» `Builds & deployments` ï¼ˆæ„å»ºå’Œéƒ¨ç½²ï¼‰
3. ç¡®è®¤è®¾ç½®ï¼š
   - **æ„å»ºå‘½ä»¤**: `npm run build:pages:static`
   - **æ„å»ºè¾“å‡ºç›®å½•**: `out`
   - **æ ¹ç›®å½•**: ç•™ç©ºï¼ˆä»€ä¹ˆéƒ½ä¸å¡«ï¼‰

### 2.3 è®¾ç½®ç¯å¢ƒå˜é‡
1. åœ¨ `Settings` é¡µé¢ï¼Œç‚¹å‡» `Environment variables` ï¼ˆç¯å¢ƒå˜é‡ï¼‰
2. ç‚¹å‡» `Add variable` ï¼ˆæ·»åŠ å˜é‡ï¼‰æŒ‰é’®
3. æŒ‰ç…§ä¸‹é¢çš„åˆ—è¡¨ï¼Œä¸€ä¸ªä¸€ä¸ªæ·»åŠ ï¼š

**ğŸ”‘ é‡è¦å˜é‡ï¼ˆå¿…é¡»æ·»åŠ ï¼‰ï¼š**
```
CLOUDFLARE_ACCOUNT_ID = 9a5ff316a26b8abb696af519e515d2de
CLOUDFLARE_API_TOKEN = HJ5ugyPnYiDdOjK_OjsFoZI8KgVytyIjN4GWNpZ9
CLOUDFLARE_R2_ACCESS_KEY_ID = 8072494c2581823ba4eefd7da9e910ca
CLOUDFLARE_R2_ACCOUNT_ID = 9a5ff316a26b8abb696af519e515d2de
CLOUDFLARE_R2_AFTERIMAGE_BUCKET_NAME = kemono-afterimage
CLOUDFLARE_R2_AFTERIMAGE_PUBLIC_URL = https://pub-d00e7b41917848d1a8403c984cb62880.r2.dev
CLOUDFLARE_R2_BUCKET_NAME = kemono-uploadimage
CLOUDFLARE_R2_PUBLIC_URL = https://pub-9ea5461e9e8b418caecb7e5b7748bdea.r2.dev
CLOUDFLARE_R2_SECRET_ACCESS_KEY = ee959470338a6f01c1f25fcf877e17fd3dfcca623ae6b94f6bfc8a3425b06b59
IMGBB_API_KEY = f62c400dfa7cffdbe66ebcdbf6f2d783
KIE_AI_4O_BASE_URL = https://api.kie.ai
KIE_AI_API_KEY = 2800cbec975bf014d815f4e5353c826a
KIE_AI_API_KEY_2 = 6a77fe3ca6856170f6618d4f249cfc6a
KIE_AI_API_KEY_3 = db092e9551f4631136cab1b141fdfd21
KIE_AI_API_KEY_4 = 3f06398cf9d8dc02a243f2dd5f2f9489
KIE_AI_API_KEY_5 = c982688b5c6938943dd721ed1d576edb
KIE_AI_EDGE_BASE = https://api.kie.ai/api/v1
KIE_AI_USER_ID = j2983236233@gmail.com
NEXT_PUBLIC_APP_URL = https://2kawaii.com
NODE_ENV = production
```

### 2.4 è®¾ç½®ç»‘å®šï¼ˆé‡è¦ï¼ï¼‰
1. åœ¨ `Settings` é¡µé¢ï¼Œç‚¹å‡» `Functions` ï¼ˆå‡½æ•°ï¼‰
2. å¾€ä¸‹æ»šåŠ¨åˆ° `KV namespace bindings` ï¼ˆKV å‘½åç©ºé—´ç»‘å®šï¼‰
3. ç‚¹å‡» `Add binding` ï¼ˆæ·»åŠ ç»‘å®šï¼‰
4. è®¾ç½®ï¼š
   - **Variable name**: `SHARE_DATA_KV`
   - **KV namespace**: é€‰æ‹© `SHARE_DATA_KV` ï¼ˆå¦‚æœæ²¡æœ‰ï¼Œéœ€è¦å…ˆåˆ›å»ºï¼‰

5. ç»§ç»­å¾€ä¸‹åˆ° `R2 bucket bindings` ï¼ˆR2 å­˜å‚¨æ¡¶ç»‘å®šï¼‰
6. æ·»åŠ ç¬¬ä¸€ä¸ªç»‘å®šï¼š
   - **Variable name**: `UPLOAD_BUCKET`
   - **R2 bucket**: `kemono-uploadimage`
7. æ·»åŠ ç¬¬äºŒä¸ªç»‘å®šï¼š
   - **Variable name**: `AFTERIMAGE_BUCKET`
   - **R2 bucket**: `kemono-afterimage`

---

## ğŸš€ æ­¥éª¤ 3: è§¦å‘é‡æ–°éƒ¨ç½²

### 3.1 æ‰‹åŠ¨è§¦å‘éƒ¨ç½²
1. åœ¨ Cloudflare Pages é¡¹ç›®é¡µé¢
2. ç‚¹å‡» `Deployments` ï¼ˆéƒ¨ç½²ï¼‰
3. ç‚¹å‡» `Retry deployment` æˆ– `Create deployment` 
4. ç­‰å¾…éƒ¨ç½²å®Œæˆï¼ˆé€šå¸¸ 2-5 åˆ†é’Ÿï¼‰

---

## âœ… æ­¥éª¤ 4: éªŒè¯éƒ¨ç½²

### 4.1 æ£€æŸ¥éƒ¨ç½²çŠ¶æ€
- åœ¨ `Deployments` é¡µé¢ç¡®è®¤æœ€æ–°éƒ¨ç½²æ˜¾ç¤º "Success"

### 4.2 æµ‹è¯•ç½‘ç«™
- è®¿é—® https://2kawaii.com
- æµ‹è¯•å›¾ç‰‡ç”ŸæˆåŠŸèƒ½æ˜¯å¦æ­£å¸¸

---

## ğŸ†˜ å¦‚æœé‡åˆ°é—®é¢˜ï¼š

### é—®é¢˜ 1: æ¨é€å¤±è´¥
```bash
# å¦‚æœæ¨é€è¢«æ‹’ç»ï¼Œå°è¯•å¼ºåˆ¶æ¨é€
git push origin master --force
```

### é—®é¢˜ 2: æ‰¾ä¸åˆ° KV å‘½åç©ºé—´
1. åœ¨ Cloudflare Dashboard ä¸»é¡µ
2. ç‚¹å‡» `Workers & Pages`
3. ç‚¹å‡» `KV`
4. ç‚¹å‡» `Create a namespace`
5. åç§°è¾“å…¥ï¼š`SHARE_DATA_KV`

### é—®é¢˜ 3: æ‰¾ä¸åˆ° R2 å­˜å‚¨æ¡¶
1. åœ¨ Cloudflare Dashboard ä¸»é¡µ
2. ç‚¹å‡» `R2 Object Storage`
3. ç¡®è®¤å­˜åœ¨ï¼š`kemono-uploadimage` å’Œ `kemono-afterimage`

### é—®é¢˜ 4: éƒ¨ç½²å¤±è´¥
- æ£€æŸ¥æ„å»ºæ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯
- ç¡®è®¤æ‰€æœ‰ç¯å¢ƒå˜é‡éƒ½å·²æ­£ç¡®è®¾ç½®

---

## ğŸ“ å®Œæˆåç¡®è®¤

å½“æ‰€æœ‰æ­¥éª¤å®Œæˆåï¼š
- âœ… æ¨é€åˆ° GitHub æˆåŠŸ
- âœ… ç¯å¢ƒå˜é‡å…¨éƒ¨æ·»åŠ 
- âœ… KV å’Œ R2 ç»‘å®šè®¾ç½®å®Œæˆ
- âœ… é‡æ–°éƒ¨ç½²æˆåŠŸ
- âœ… ç½‘ç«™ https://2kawaii.com å¯ä»¥æ­£å¸¸è®¿é—®

å¦‚æœæ‰€æœ‰æ­¥éª¤éƒ½å®Œæˆäº†ï¼Œæ­å–œï¼ä½ å·²ç»æˆåŠŸæ¢å¤åˆ°å­˜æ¡£ç‚¹çŠ¶æ€äº†ï¼ ğŸ‰
