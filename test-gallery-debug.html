<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gallery Debug Test</title>
    <style>
        .gallery {
            columns: 4;
            column-gap: 1rem;
            min-height: 500px;
        }
        
        .item {
            break-inside: avoid;
            margin-bottom: 1rem;
            display: block;
            page-break-inside: avoid;
            background: white;
            border-radius: 1rem;
            padding: 1rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .image-container {
            min-height: 200px;
            background: linear-gradient(135deg, #fef3c7, #fed7aa);
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 0.5rem;
            margin-bottom: 1rem;
        }
        
        .debug-info {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 12px;
        }
    </style>
</head>
<body style="background: linear-gradient(135deg, #fef3c7, #fed7aa); padding: 20px;">
    <div class="debug-info">
        <div>Total Items: <span id="totalCount">0</span></div>
        <div>Visible Items: <span id="visibleCount">0</span></div>
        <div>Window Height: <span id="windowHeight">0</span></div>
    </div>
    
    <h1>Gallery Debug Test</h1>
    <p>Testing CSS Columns layout with 20 items</p>
    
    <div class="gallery" id="gallery">
        <!-- Items will be generated by JavaScript -->
    </div>
    
    <script>
        const gallery = document.getElementById('gallery');
        const totalCount = 20;
        
        // Generate test items
        for (let i = 1; i <= totalCount; i++) {
            const item = document.createElement('div');
            item.className = 'item';
            item.innerHTML = `
                <div class="image-container">
                    <div style="font-size: 3rem;">ðŸŽ¨</div>
                </div>
                <h3>Test Item ${i}</h3>
                <p>This is test item number ${i}</p>
                <small>Timestamp: ${new Date().toLocaleString()}</small>
            `;
            gallery.appendChild(item);
        }
        
        // Update debug info
        function updateDebugInfo() {
            document.getElementById('totalCount').textContent = totalCount;
            document.getElementById('windowHeight').textContent = window.innerHeight;
            
            // Count visible items
            const items = document.querySelectorAll('.item');
            let visibleCount = 0;
            items.forEach(item => {
                const rect = item.getBoundingClientRect();
                if (rect.top < window.innerHeight && rect.bottom > 0) {
                    visibleCount++;
                }
            });
            document.getElementById('visibleCount').textContent = visibleCount;
        }
        
        updateDebugInfo();
        window.addEventListener('scroll', updateDebugInfo);
        window.addEventListener('resize', updateDebugInfo);
        
        // Log all items
        console.log('Gallery items:', document.querySelectorAll('.item').length);
        document.querySelectorAll('.item').forEach((item, index) => {
            console.log(`Item ${index + 1}:`, item);
        });
    </script>
</body>
</html> 